version: 2

sources:
  - name: csv
    schema: main 
    description: "Rådata som laddats in i DuckDB via dlt/Prefect"
    tables:

      - name: stage_patients  # dlt sparar oftast i gemener
        description: "Råa patientdata"
        columns:
          - name: patient_id
            tests:
              - not_null_custom

      - name: stage_doctors
        description: "Råa läkardata"
        columns:
          - name: doctor_id
            tests:
              - not_null_custom

      - name: stage_clinics
        description: "Råa klinikdata"
        columns:
          - name: clinic_id
            tests:
              - not_null_custom

      - name: stage_diagnosis
        description: "Råa diagnosdata"
        columns:
          - name: diag_code
            tests:
              - not_null_custom

      - name: stage_visits
        description: "Råa besöksdata"
        columns:
          - name: visit_id
            tests: 
              - not_null_custom


      - name: stage_date
        description: "Datumdimension"
        columns:
          - name: date_key
            tests:
              - not_null_custom

  - name: sql_external_sources
    schema: main 
    description: "Rådata som laddats in i DuckDB via dlt/Prefect"
    tables:
      - name: stage_diagnosis_descriptions  # dlt sparar oftast i gemener
        description: "Råa diagnosbeskrivningar"